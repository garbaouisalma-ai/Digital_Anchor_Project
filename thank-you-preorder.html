<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="page-title">شكراً لطلبك | المرساة الرقمية</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 
                        'anchor-blue': '#1a202c', 
                        'anchor-gold': '#ffd700',
                        'anchor-green': '#059669'
                    },
                    fontFamily: { 
                        sans: ['Tajawal', 'sans-serif'], 
                        serif: ['Amiri', 'serif'] 
                    }
                }
            }
        }
    </script>
    
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root" class="flex flex-col min-h-screen w-full"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext, useMemo } = React;

        // =====================================
        // 1. قاموس الترجمة (AR و EN فقط)
        // =====================================
        const ALL_TRANSLATIONS = {
            'site-logo': { ar: 'المرساة الرقمية', en: 'Digital Anchor' },
            'nav-home': { ar: 'الرئيسية', en: 'Home' },
            'nav-guide': { ar: 'الدليل', en: 'Guide' },
            'nav-resources': { ar: 'الموارد', en: 'Resources' },
            'nav-members': { ar: 'الأعضاء', en: 'Members' },
            'nav-buy': { ar: 'احجز نسختك', en: 'Pre-order' },
            'page-title': { ar: 'شكراً لطلبك', en: 'Thank You for Your Order' },
            'icon-message': { ar: 'لقد تم تأكيد حجزك بنجاح!', en: 'Your pre-order has been successfully confirmed!' },
            'main-message': { ar: 'تهانينا! لقد اتخذت الخطوة الأولى نحو استعادة سيادتك الرقمية. تفاصيل طلبك في طريقها إليك.', en: 'Congratulations! You\'ve taken the first step toward reclaiming your digital sovereignty. Your order details are on their way.' },
            'step-1-title': { ar: 'الخطوة 1: تحقق من بريدك', en: 'Step 1: Check Your Email' },
            'step-1-desc': { ar: 'ستجد رسالة تأكيد تحتوي على رابط تحميل الكتاب الإلكتروني الآن.', en: 'You will find a confirmation email with the e-book download link now.' },
            'step-2-title': { ar: 'الخطوة 2: ابدأ رحلتك', en: 'Step 2: Start Your Journey' },
            'step-2-desc': { ar: 'ابدأ بقراءة المقدمة ودليل البدء السريع في قسم الموارد.', en: 'Start by reading the introduction and the quick start guide in the Resources section.' },
            'link-resources': { ar: 'اذهب إلى الموارد', en: 'Go to Resources' },
            'contact-title': { ar: 'تواصل معنا', en: 'Contact Us' },
            'contact-email-note': { ar: 'الدعم متاح يومياً 9 صباحاً - 5 مساءً', en: 'Support available daily 9 AM - 5 PM' },
            'footer-copy': { ar: '© 2025 المرساة الرقمية. جميع الحقوق محفوظة.', en: '© 2025 Digital Anchor. All Rights Reserved.' }
        };

        // =====================================
        // 2. بيانات أسعار الصرف (مع اليورو EUR)
        // =====================================
        const EXCHANGE_RATES = {
            'SAR': { rate: 3.75, symbol: 'ر.س', placement: 'after' },
            'USD': { rate: 1.0, symbol: '$', placement: 'before' },    
            'AED': { rate: 3.67, symbol: 'د.إ', placement: 'after' },
            'EUR': { rate: 1.10, symbol: '€', placement: 'before' }   
        };
        const SAR_RATE = EXCHANGE_RATES['SAR'].rate; 

        // =====================================
        // 3. السياق والخطافات (Language Provider)
        // =====================================
        const LanguageContext = createContext();

        function useTranslation() {
            return useContext(LanguageContext);
        }

        function LanguageProvider({ children }) {
            const [currentLang, setCurrentLang] = useState(localStorage.getItem('preferredLang') || 'ar');
            const [currentCurrency, setCurrentCurrency] = useState(localStorage.getItem('preferredCurrency') || 'SAR');

            useEffect(() => {
                localStorage.setItem('preferredLang', currentLang);
                document.documentElement.setAttribute('dir', currentLang === 'ar' ? 'rtl' : 'ltr');
                document.documentElement.setAttribute('lang', currentLang);
                
                const titleKey = document.head.querySelector('title')?.getAttribute('data-key') || 'page-title';
                document.title = ALL_TRANSLATIONS[titleKey]?.[currentLang] || ALL_TRANSLATIONS[titleKey]?.['ar'] || 'Digital Anchor';
            }, [currentLang]);

            const t = useMemo(() => (key) => {
                return ALL_TRANSLATIONS[key]?.[currentLang] || ALL_TRANSLATIONS[key]?.['ar'] || `[${key}]`;
            }, [currentLang]);

            const convertPrice = (basePriceSAR) => {
                const target = EXCHANGE_RATES[currentCurrency];
                if (!target || isNaN(basePriceSAR)) return `${basePriceSAR} SAR`;

                const priceInUSD = basePriceSAR / SAR_RATE;
                
                const decimalPlaces = (currentCurrency === 'SAR' || currentCurrency === 'AED') ? 0 : 2;
                const newPrice = (priceInUSD * target.rate).toFixed(decimalPlaces); 
                
                const symbol = target.symbol;
                
                return target.placement === 'before' ? `${symbol}${newPrice}` : `${newPrice} ${symbol}`;
            };

            const setCurrency = (currencyCode) => {
                setCurrentCurrency(currencyCode);
                localStorage.setItem('preferredCurrency', currencyCode);
            };

            const contextValue = {
                t,
                currentLang,
                setLang: setCurrentLang,
                currentCurrency,
                setCurrency,
                convertPrice,
                EXCHANGE_RATES,
                SAR_RATE
            };

            return (
                <LanguageContext.Provider value={contextValue}>
                    {children}
                </LanguageContext.Provider>
            );
        }

        // =====================================
        // 4. مكون NavBar الموحد (AR/EN + 4 Currencies)
        // (مستخدم هنا نسخة مبسطة لصفحة الشكر)
        // =====================================
        const SimpleNavBar = () => {
            const { t } = useTranslation();
            
            return (
                <nav className="bg-anchor-blue text-white py-4 px-6 sticky top-0 z-50 shadow-lg">
                    <div className="max-w-7xl mx-auto flex justify-between items-center">
                        <a href="index.html" className="flex items-center gap-3 group">
                            <div className="w-10 h-10 bg-gradient-to-r from-anchor-gold to-yellow-500 rounded-lg flex items-center justify-center">
                                <i className="fas fa-anchor text-anchor-blue text-lg"></i>
                            </div>
                            <span className="font-bold text-lg">{t('site-logo')}</span>
                        </a>
                    </div>
                </nav>
            );
        };


        const ThankYouPage = () => {
            const { t } = useTranslation();

            return (
                <div className="flex flex-col min-h-screen">
                    <SimpleNavBar />

                    <main className="flex-grow container mx-auto px-4 py-12 max-w-3xl">
                        <div className="bg-white p-8 md:p-12 rounded-xl shadow-2xl border-t-4 border-anchor-green text-center">
                            
                            <i className="fas fa-check-circle text-anchor-green text-6xl mb-4 animate-pulse-slow"></i>
                            
                            <h1 className="text-3xl font-extrabold text-anchor-green mb-4">{t('icon-message')}</h1>
                            
                            <p className="text-lg text-gray-600 mb-8 font-serif">{t('main-message')}</p>
                            
                            <div className="space-y-6">
                                {/* Step 1 */}
                                <div className="p-4 bg-blue-50 rounded-lg border border-blue-100">
                                    <h2 className="text-xl font-bold text-anchor-blue mb-1">{t('step-1-title')}</h2>
                                    <p className="text-gray-700">{t('step-1-desc')}</p>
                                </div>
                                
                                {/* Step 2 */}
                                <div className="p-4 bg-yellow-50 rounded-lg border border-yellow-100">
                                    <h2 className="text-xl font-bold text-anchor-blue mb-1">{t('step-2-title')}</h2>
                                    <p className="text-gray-700 mb-4">{t('step-2-desc')}</p>
                                    <a href="resources.html" className="inline-block bg-anchor-blue text-white px-6 py-2 rounded-full font-bold hover:bg-gray-800 transition">
                                        {t('link-resources')}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="bg-anchor-blue text-slate-400 py-8 text-center">
                        <div className="max-w-4xl mx-auto px-6">
                            <hr className="border-slate-700 my-6" />
                            <div className="text-center text-slate-400 text-sm">
                                <p>{t('footer-copy')}</p>
                                <p className="mt-2 text-white font-medium">{t('contact-title')}</p>
                                <a href="mailto:garbaouisalma@gmail.com" className="hover:text-anchor-gold transition">
                                    <i className="fas fa-envelope mr-2"></i>
                                    garbaouisalma@gmail.com
                                </a>
                                <p className="text-xs text-slate-500 mt-1">{t('contact-email-note')}</p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LanguageProvider><ThankYouPage /></LanguageProvider>);
    </script>
</body>
</html>