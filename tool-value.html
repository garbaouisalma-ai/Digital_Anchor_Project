<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أداة تحديد القيمة الجوهرية | المرساة الرقمية</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'anchor-blue': '#1a202c', 'anchor-gold': '#ffd700' },
                    fontFamily: { sans: ['Tajawal', 'sans-serif'] },
                    animation: { 'fade-in-up': 'fadeInUp 0.5s ease-out' },
                    keyframes: { fadeInUp: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>
    <script type="text/babel">

        // ----------------------------------------------------
        // الكود المشترك للغة والعملة (Language/Currency Logic)
        // ----------------------------------------------------
        
        const translations = {
            ar: {
                'lang_ar': 'العربية', 'lang_en': 'English', 'lang_fr': 'Français',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'الرئيسية',
                'guide': 'الدليل',
                'buy_book': 'الشراء',
                'app_name': 'المرساة الرقمية',
                'tool_title': 'أداة تحديد القيمة الجوهرية',
                'footer-copy': '© 2025 المرساة الرقمية - "من أنت حين تنطفئ الشاشة؟". جميع الحقوق محفوظة.',

                'tool-header': 'اكتشف قيمك الجوهرية',
                'tool-subtitle': 'اختر ثلاث قيم هي الأكثر أهمية بالنسبة لك في حياتك غير الرقمية.',
                'val-1': 'الإبداع', 'val-2': 'التركيز', 'val-3': 'السكينة', 'val-4': 'التعلم',
                'val-5': 'العائلة', 'val-6': 'الصحة', 'val-7': 'المال', 'val-8': 'الشغف',
                'val-9': 'الإنجاز', 'val-10': 'الاستقلال', 'val-11': 'التواصل', 'val-12': 'المغامرة',
                'btn-select': 'حدد هذه القيمة',
                'btn-continue': 'استمرار',
                'selected-count': 'تم اختيار {count} قيم من 3',
                'result-header': 'نتائجك هي:',
                'result-msg': 'تهانينا! قيمك الجوهرية هي البوصلة التي يجب أن تقود سلوكك الرقمي. الآن، اربط أوقات إيقاف الشاشة بهذه القيم لتعزيز التحرر والقيادة.',
                'btn-covenant': 'توقيع عهد التحرر والقيادة',
                'btn-reset': 'إعادة التعيين',
            },
            en: {
                'lang_ar': 'Arabic', 'lang_en': 'English', 'lang_fr': 'French',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'Home',
                'guide': 'Guide',
                'buy_book': 'Purchase',
                'app_name': 'Digital Anchor',
                'tool_title': 'Core Value Identification Tool',
                'footer-copy': '© 2025 Digital Anchor - "Who are you when the screen turns off?". All rights reserved.',

                'tool-header': 'Discover Your Core Values',
                'tool-subtitle': 'Select three values that are most important to you in your non-digital life.',
                'val-1': 'Creativity', 'val-2': 'Focus', 'val-3': 'Serenity', 'val-4': 'Learning',
                'val-5': 'Family', 'val-6': 'Health', 'val-7': 'Money', 'val-8': 'Passion',
                'val-9': 'Achievement', 'val-10': 'Independence', 'val-11': 'Communication', 'val-12': 'Adventure',
                'btn-select': 'Select This Value',
                'btn-continue': 'Continue',
                'selected-count': 'Selected {count} out of 3 values',
                'result-header': 'Your Results Are:',
                'result-msg': 'Congratulations! Your core values are the compass that should guide your digital behavior. Now, link your screen-off times to these values to foster liberation and leadership.',
                'btn-covenant': 'Sign the Pledge of Liberation and Leadership',
                'btn-reset': 'Reset',
            },
            fr: {
                'lang_ar': 'Arabe', 'lang_en': 'Anglais', 'lang_fr': 'Français',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'Accueil',
                'guide': 'Guide',
                'buy_book': 'Acheter',
                'app_name': 'Ancre Numérique',
                'tool_title': 'Outil d\'Identification des Valeurs Fondamentales',
                'footer-copy': '© 2025 Ancre Numérique - "Qui êtes-vous lorsque l\'écran s\'éteint?". Tous droits réservés.',

                'tool-header': 'Découvrez Vos Valeurs Fondamentales',
                'tool-subtitle': 'Sélectionnez trois valeurs qui sont les plus importantes pour vous dans votre vie non-numérique.',
                'val-1': 'Créativité', 'val-2': 'Concentration', 'val-3': 'Sérénité', 'val-4': 'Apprentissage',
                'val-5': 'Famille', 'val-6': 'Santé', 'val-7': 'Argent', 'val-8': 'Passion',
                'val-9': 'Accomplissement', 'val-10': 'Indépendance', 'val-11': 'Communication', 'val-12': 'Aventure',
                'btn-select': 'Sélectionner cette Valeur',
                'btn-continue': 'Continuer',
                'selected-count': 'Sélectionné {count} sur 3 valeurs',
                'result-header': 'Vos Résultats Sont:',
                'result-msg': 'Félicitations! Vos valeurs fondamentales sont la boussole qui devrait guider votre comportement numérique. Maintenant, liez vos moments sans écran à ces valeurs pour favoriser la libération et le leadership.',
                'btn-covenant': 'Signer l\'Engagement de Libération et de Leadership',
                'btn-reset': 'Réinitialiser',
            },
        };

        const LanguageContext = React.createContext();
        const LanguageProvider = ({ children }) => {
            const [language, setLanguage] = React.useState('ar');
            const [currency, setCurrency] = React.useState('USD');
            const t = (key) => translations[language]?.[key] || key;
            React.useEffect(() => {
                document.documentElement.lang = language;
                document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
            }, [language]);
            return (
                <LanguageContext.Provider value={{ language, setLanguage, currency, setCurrency, t }}>
                    {children}
                </LanguageContext.Provider>
            );
        };
        const useTranslation = () => React.useContext(LanguageContext);

        const LanguageCurrencySwitcher = () => {
            const { language, setLanguage, currency, setCurrency, t } = useTranslation();
            const handleLanguageChange = (e) => setLanguage(e.target.value);
            const handleCurrencyChange = (e) => setCurrency(e.target.value);
            return (
                <div className="flex items-center gap-3">
                    <div className="relative text-white"> 
                        <select 
                            value={language} 
                            onChange={handleLanguageChange} 
                            className="appearance-none bg-anchor-blue border border-gray-600 rounded-lg py-1 pl-6 pr-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-anchor-gold cursor-pointer"
                        >
                            <option value="ar">{t('lang_ar')}</option>
                            <option value="en">{t('lang_en')}</option>
                            <option value="fr">{t('lang_fr')}</option>
                        </select>
                        <i className="fas fa-caret-down absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none text-gray-400"></i>
                    </div>
                    <div className="relative text-white">
                        <select 
                            value={currency} 
                            onChange={handleCurrencyChange} 
                            className="appearance-none bg-anchor-blue border border-gray-600 rounded-lg py-1 pl-6 pr-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-anchor-gold cursor-pointer"
                        >
                            <option value="USD">{t('curr_usd')}</option>
                            <option value="EUR">{t('curr_eur')}</option>
                            <option value="SAR">{t('curr_sar')}</option>
                        </select>
                        <i className="fas fa-caret-down absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none text-gray-400"></i>
                    </div>
                </div>
            );
        };

        const Navbar = () => {
            const { t } = useTranslation(); 
            return (
                <nav className="bg-anchor-blue text-white py-4 px-6 shadow-lg">
                    <div className="max-w-7xl mx-auto flex justify-between items-center">
                        <a href="index.html" className="flex items-center gap-3 group">
                            <div className="w-10 h-10 bg-gradient-to-r from-anchor-gold to-yellow-500 rounded-lg flex items-center justify-center transition-transform group-hover:scale-110">
                                <i className="fas fa-anchor text-white text-lg"></i>
                            </div>
                            <div>
                                <span className="font-bold text-lg hidden md:block">{t('app_name')}</span> 
                                <span className="text-xs text-slate-300 block">{t('tool_title')}</span>
                            </div>
                        </a>
                        
                        <div className="flex gap-4 md:gap-6 text-sm font-medium items-center">
                            <a href="index.html" className="hover:text-anchor-gold transition flex items-center gap-2">
                                <i className="fas fa-home"></i>
                                <span className="hidden md:inline">{t('home')}</span>
                            </a>
                            <a href="guide.html" className="hover:text-anchor-gold transition hidden sm:flex items-center gap-2">
                                <i className="fas fa-book-open"></i>
                                <span>{t('guide')}</span>
                            </a>
                            <a href="book-preorder.html" className="bg-anchor-gold text-anchor-blue px-5 py-2.5 rounded-full font-bold hover:bg-yellow-400 transition shadow-lg flex items-center gap-2">
                                <i className="fas fa-shopping-cart"></i>
                                <span>{t('buy_book')}</span>
                            </a>
                            
                            <LanguageCurrencySwitcher />
                        </div>
                    </div>
                </nav>
            );
        };

        const ValueTool = () => {
            const { t } = useTranslation();
            const [selectedValues, setSelectedValues] = React.useState([]);
            const [showResult, setShowResult] = React.useState(false);
        
            const allValues = [
                { key: 'val-1', icon: 'fas fa-palette' }, { key: 'val-2', icon: 'fas fa-bullseye' },
                { key: 'val-3', icon: 'fas fa-spa' }, { key: 'val-4', icon: 'fas fa-lightbulb' },
                { key: 'val-5', icon: 'fas fa-home' }, { key: 'val-6', icon: 'fas fa-heartbeat' },
                { key: 'val-7', icon: 'fas fa-dollar-sign' }, { key: 'val-8', icon: 'fas fa-fire' },
                { key: 'val-9', icon: 'fas fa-trophy' }, { key: 'val-10', icon: 'fas fa-user-tie' },
                { key: 'val-11', icon: 'fas fa-comments' }, { key: 'val-12', icon: 'fas fa-compass' }
            ];
        
            const handleSelectValue = (valueKey) => {
                if (selectedValues.includes(valueKey)) {
                    setSelectedValues(selectedValues.filter(v => v !== valueKey));
                } else if (selectedValues.length < 3) {
                    setSelectedValues([...selectedValues, valueKey]);
                }
            };
        
            const ValueCard = ({ valueKey, icon }) => {
                const isSelected = selectedValues.includes(valueKey);
                const isDisabled = selectedValues.length >= 3 && !isSelected;
                
                return (
                    <div 
                        className={`p-6 rounded-lg shadow-md transition-all duration-300 transform hover:scale-[1.02] cursor-pointer 
                            ${isSelected 
                                ? 'bg-anchor-gold text-anchor-blue border-2 border-anchor-blue shadow-xl' 
                                : isDisabled 
                                ? 'bg-gray-200 text-gray-500 opacity-60'
                                : 'bg-white text-anchor-blue border border-gray-100 hover:shadow-lg'}`
                        }
                        onClick={() => !isDisabled && handleSelectValue(valueKey)}
                    >
                        <i className={`${icon} text-4xl mb-3 ${isSelected ? 'text-anchor-blue' : 'text-anchor-gold'}`}></i>
                        <h3 className="text-lg font-bold mb-3">{t(valueKey)}</h3>
                        {isSelected && (
                            <span className="bg-anchor-blue text-white px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1">
                                <i className="fas fa-check"></i>
                                {t('btn-select')}
                            </span>
                        )}
                    </div>
                );
            };
        
            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar />
                    <main className="flex-grow max-w-5xl mx-auto p-6 lg:p-12 w-full">
                        <div className="bg-white p-8 md:p-12 rounded-2xl shadow-xl border-t-8 border-anchor-blue text-center">
                            
                            <header className="mb-10">
                                <h1 className="text-3xl font-bold text-anchor-blue mb-2">{t('tool_title')}</h1>
                                <p className="text-gray-600">{t('tool-subtitle')}</p>
                            </header>
                            
                            {!showResult ? (
                                <div>
                                    <div className="text-center mb-6">
                                        <p className={`font-bold text-lg ${selectedValues.length === 3 ? 'text-anchor-green' : 'text-anchor-gold'}`}>
                                            {t('selected-count').replace('{count}', selectedValues.length)}
                                        </p>
                                    </div>
                                    <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
                                        {allValues.map(v => (
                                            <ValueCard key={v.key} valueKey={v.key} icon={v.icon} />
                                        ))}
                                    </div>
                                    <div className="mt-10">
                                        <button 
                                            onClick={() => setShowResult(true)} 
                                            disabled={selectedValues.length !== 3}
                                            className={`px-10 py-3 rounded-lg font-bold transition duration-300 shadow-md ${selectedValues.length === 3 
                                                ? 'bg-anchor-blue text-white hover:bg-gray-800' 
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}
                                        >
                                            {t('btn-continue')}
                                            <i className="fas fa-arrow-left mr-2"></i>
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="animate-fade-in-up">
                                    <h2 className="text-3xl font-bold text-anchor-gold mb-6">{t('result-header')}</h2>
                                    <div className="flex justify-center flex-wrap gap-4 mb-8">
                                        {selectedValues.map(valueKey => (
                                            <span key={valueKey} className="bg-anchor-blue text-white text-xl px-6 py-3 rounded-full shadow-lg font-medium">
                                                {t(valueKey)}
                                            </span>
                                        ))}
                                    </div>
                                    <div className="bg-blue-50 p-6 rounded-xl border border-blue-100 mb-8">
                                        <p className="text-gray-700 leading-relaxed font-medium">{t('result-msg')}</p>
                                    </div>
                                    <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                        <a href="covenant.html" className="bg-anchor-blue text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-800 transition shadow-md">
                                            <i className="fas fa-scroll ml-2"></i>
                                            {t('btn-covenant')}
                                        </a>
                                        <button onClick={() => { setShowResult(false); setSelectedValues([]); }} className="text-gray-500 hover:text-anchor-blue underline">
                                            {t('btn-reset')}
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>
                    <footer className="bg-anchor-blue text-slate-400 py-6 text-center text-sm mt-auto">
                        {t('footer-copy')}
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LanguageProvider><ValueTool /></LanguageProvider>);
    </script>
</body>
</html>