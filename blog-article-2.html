<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ù‡Ø¯ Ø§Ù„ØªØ­Ø±Ø± ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø© | Ø§Ù„Ù…Ø±Ø³Ø§Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 
                        'anchor-blue': '#0f172a', 
                        'anchor-gold': '#d4af37',
                        'anchor-green': '#059669',
                        'anchor-red': '#dc2626'
                    },
                    fontFamily: { 
                        sans: ['Tajawal', 'sans-serif'], 
                        serif: ['Amiri', 'serif'] 
                    }
                }
            }
        }
    </script>
    
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <style>
        /* Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ù‡Ù†Ø§ (Ø¥Ù† ÙˆØ¬Ø¯Øª) */
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background: white;
            }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>
    <script type="text/babel">

        // ----------------------------------------------------
        // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù„Ù„ØºØ© ÙˆØ§Ù„Ø¹Ù…Ù„Ø© (Language/Currency Logic)
        // ----------------------------------------------------
        
        // 1. Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„ØªØ±Ø¬Ù…Ø©
        const translations = {
            // Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§ÙØªØ±Ø§Ø¶ÙŠ)
            ar: {
                'lang_ar': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', 'lang_en': 'English', 'lang_fr': 'FranÃ§ais',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                'stories_title': 'Ù‚ØµØµ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…Ù„Ù‡Ù…Ø©', 
                'covenant_title': 'Ø¹Ù‡Ø¯ Ø§Ù„ØªØ­Ø±Ø± ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø©', 
                'app_name': 'Ø§Ù„Ù…Ø±Ø³Ø§Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©',
                'guide': 'Ø§Ù„Ø¯Ù„ÙŠÙ„',
                'buy_book': 'Ø§Ù„Ø´Ø±Ø§Ø¡',
                'footer-copy': 'Â© 2025 Ø§Ù„Ù…Ø±Ø³Ø§Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© - "Ù…Ù† Ø£Ù†Øª Ø­ÙŠÙ† ØªÙ†Ø·ÙØ¦ Ø§Ù„Ø´Ø§Ø´Ø©ØŸ". Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.',
                'footer-email': 'Ø´Ø§Ø±Ùƒ Ù‚ØµØªÙƒ Ù…Ø¹Ù†Ø§:',
                'footer-covenant': 'Ø¹Ù‡Ø¯ Ø§Ù„ØªØ­Ø±Ø±',
                'footer-resources': 'Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©',
                'footer-preorder': 'Ø·Ù„Ø¨ Ø§Ù„ÙƒØªØ§Ø¨',
            },
            // Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
            en: {
                'lang_ar': 'Arabic', 'lang_en': 'English', 'lang_fr': 'French',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'Home',
                'stories_title': 'Inspiring Success Stories',
                'covenant_title': 'Pledge of Liberation and Leadership',
                'app_name': 'Digital Anchor',
                'guide': 'Guide',
                'buy_book': 'Purchase',
                'footer-copy': 'Â© 2025 Digital Anchor - "Who are you when the screen turns off?". All rights reserved.',
                'footer-email': 'Share your story with us:',
                'footer-covenant': 'Pledge of Liberation',
                'footer-resources': 'Free Resources',
                'footer-preorder': 'Order Book',
            },
            // Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©
            fr: {
                'lang_ar': 'Arabe', 'lang_en': 'Anglais', 'lang_fr': 'FranÃ§ais',
                'curr_usd': 'USD', 'curr_eur': 'EUR', 'curr_sar': 'SAR',
                'home': 'Accueil',
                'stories_title': 'Histoires de SuccÃ¨s Inspirantes',
                'covenant_title': 'Engagement de LibÃ©ration et de Leadership',
                'app_name': 'Ancre NumÃ©rique',
                'guide': 'Guide',
                'buy_book': 'Acheter',
                'footer-copy': 'Â© 2025 Ancre NumÃ©rique - "Qui Ãªtes-vous lorsque l\'Ã©cran s\'Ã©teint?". Tous droits rÃ©servÃ©s.',
                'footer-email': 'Partagez votre histoire avec nous:',
                'footer-covenant': 'Engagement de LibÃ©ration',
                'footer-resources': 'Ressources Gratuites',
                'footer-preorder': 'Commander Livre',
            },
        };

        // 2. Ù…Ø²ÙˆØ¯ Ø§Ù„Ù„ØºØ© (Provider) ÙˆØ§Ù„Ø³ÙŠØ§Ù‚ (Context)
        const LanguageContext = React.createContext();

        const LanguageProvider = ({ children }) => {
            const [language, setLanguage] = React.useState('ar');
            const [currency, setCurrency] = React.useState('USD');
            const t = (key) => translations[language]?.[key] || key;

            React.useEffect(() => {
                document.documentElement.lang = language;
                document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
            }, [language]);

            return (
                <LanguageContext.Provider value={{ language, setLanguage, currency, setCurrency, t }}>
                    {children}
                </LanguageContext.Provider>
            );
        };

        // 3. Ø§Ù„Ø®Ø·Ø§Ù (Hook) Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ù‚
        const useTranslation = () => React.useContext(LanguageContext);

        // 4. Ù…ÙƒÙˆÙ† Ù…Ø¨Ø¯Ù„ Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø¹Ù…Ù„Ø©
        const LanguageCurrencySwitcher = () => {
            const { language, setLanguage, currency, setCurrency, t } = useTranslation();

            const handleLanguageChange = (e) => setLanguage(e.target.value);
            const handleCurrencyChange = (e) => setCurrency(e.target.value);

            return (
                <div className="flex items-center gap-3">
                    {/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„ØºØ© */}
                    <div className="relative text-white"> 
                        <select 
                            value={language} 
                            onChange={handleLanguageChange} 
                            className="appearance-none bg-anchor-blue border border-gray-600 rounded-lg py-1 pl-6 pr-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-anchor-gold cursor-pointer"
                        >
                            <option value="ar">{t('lang_ar')}</option>
                            <option value="en">{t('lang_en')}</option>
                            <option value="fr">{t('lang_fr')}</option>
                        </select>
                        {/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø³Ù‡Ù… */}
                        <i className="fas fa-caret-down absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none text-gray-400"></i>
                    </div>
                    
                    {/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„Ø¹Ù…Ù„Ø© */}
                    <div className="relative text-white">
                        <select 
                            value={currency} 
                            onChange={handleCurrencyChange} 
                            className="appearance-none bg-anchor-blue border border-gray-600 rounded-lg py-1 pl-6 pr-3 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-anchor-gold cursor-pointer"
                        >
                            <option value="USD">{t('curr_usd')}</option>
                            <option value="EUR">{t('curr_eur')}</option>
                            <option value="SAR">{t('curr_sar')}</option>
                        </select>
                        {/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø³Ù‡Ù… */}
                        <i className="fas fa-caret-down absolute top-1/2 right-2 transform -translate-y-1/2 pointer-events-none text-gray-400"></i>
                    </div>
                </div>
            );
        };

        // ----------------------------------------------------
        // Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØµÙØ­Ø©
        // ----------------------------------------------------
        
        const { useState } = React;

        const CovenantPage = () => {
            const [name, setName] = useState('');
            const [date, setDate] = useState('');
            const [isSigned, setIsSigned] = useState(false);
            const { t } = useTranslation(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… t

            // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
            const handleSign = () => {
                if (name.trim() && date.trim()) {
                    setIsSigned(true);
                } else {
                    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ù„Ù„ØªÙˆÙ‚ÙŠØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù‡Ø¯.");
                }
            };
        
            return (
                <div className="min-h-screen flex flex-col bg-slate-100 font-sans">
                    {/* Header - ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„ÙŠØªØ¶Ù…Ù† Ø§Ù„Ù…Ø¨Ø¯Ù„ ÙˆØ§Ù„ØªØ±Ø¬Ù…Ø© */}
                    <header className="bg-anchor-blue text-white py-4 shadow-xl no-print">
                        <div className="max-w-5xl mx-auto px-6 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-anchor-gold rounded-full flex items-center justify-center">
                                    <i className="fas fa-scroll text-anchor-blue text-lg"></i>
                                </div>
                                <h1 className="text-lg font-bold">{t('covenant_title')}</h1>
                            </div>
                            
                            <LanguageCurrencySwitcher />
                        </div>
                    </header>
        
                    <main className="flex-grow max-w-5xl mx-auto p-6 w-full print-area">
                        <div className={`bg-white p-8 md:p-12 rounded-xl shadow-2xl border-t-8 ${isSigned ? 'border-anchor-green' : 'border-anchor-red'}`}>
                            <div className="text-center mb-10">
                                <h2 className="text-3xl md:text-4xl font-serif font-bold text-anchor-blue mb-2">{t('covenant_title')}</h2>
                                <p className="text-gray-500">ÙˆØ«ÙŠÙ‚Ø© Ø´Ø®ØµÙŠØ© Ù„Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p>
                            </div>
                            
                            {/* ... (Ø¨Ù‚ÙŠØ© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù‡Ø¯) ... */}
                            
                            <div className="mt-16 pt-8 border-t border-gray-200 grid grid-cols-2 gap-12">
                                <div>
                                    <label htmlFor="name" className="block text-sm font-bold text-gray-500 mb-2">Ø§Ù„Ø§Ø³Ù…</label>
                                    <input 
                                        type="text" 
                                        id="name"
                                        value={name}
                                        onChange={(e) => setName(e.target.value)}
                                        className="w-full border-b-2 border-gray-300 h-8 focus:border-anchor-blue focus:outline-none transition"
                                        readOnly={isSigned}
                                    />
                                </div>
                                <div>
                                    <label htmlFor="date" className="block text-sm font-bold text-gray-500 mb-2">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                                    <input 
                                        type="date" 
                                        id="date"
                                        value={date}
                                        onChange={(e) => setDate(e.target.value)}
                                        className="w-full border-b-2 border-gray-300 h-8 focus:border-anchor-blue focus:outline-none transition"
                                        readOnly={isSigned}
                                    />
                                </div>
                            </div>
        
                            <div className="text-center mt-10 no-print">
                                {!isSigned ? (
                                    <button 
                                        onClick={handleSign} 
                                        className="bg-anchor-red text-white px-8 py-3 rounded-lg font-bold hover:bg-red-700 transition shadow-lg flex items-center justify-center mx-auto gap-2"
                                    >
                                        <i className="fas fa-signature"></i>
                                        ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ø¢Ù†
                                    </button>
                                ) : (
                                    <div className="text-anchor-green font-bold text-xl flex items-center justify-center gap-3">
                                        <i className="fas fa-check-circle"></i>
                                        ØªÙ… Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­!
                                    </div>
                                )}
                            </div>
                            
                            <div className="text-center mt-8 no-print space-x-4 space-x-reverse">
                                <button onClick={() => window.print()} className="bg-anchor-blue text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-800 transition shadow-lg">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ù‡Ø¯</button>
                                <a href="downloads/Pledge_Paper.pdf" download className="text-anchor-blue font-bold underline hover:text-anchor-gold">ØªØ­Ù…ÙŠÙ„ ÙƒÙ…Ù„Ù PDF</a>
                            </div>
                        </div>
                    </main>
        
                    <footer className="bg-anchor-blue text-white py-8 border-t border-slate-800 mt-12 no-print">
                        <div className="max-w-5xl mx-auto px-6">
                            <div className="flex flex-col md:flex-row justify-between items-center mb-6">
                                <div className="mb-4 md:mb-0">
                                    <div className="flex items-center gap-3">
                                        <div className="w-10 h-10 bg-anchor-gold rounded-full flex items-center justify-center">
                                            <i className="fas fa-anchor text-white"></i>
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-lg">{t('app_name')}</h3>
                                            <p className="text-slate-300 text-sm">{t('covenant_title')}</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <a href="mailto:garbaouisalma@gmail.com" className="text-anchor-gold hover:text-yellow-400 transition">
                                        <i className="fas fa-envelope ml-2"></i>
                                        garbaouisalma@gmail.com
                                    </a>
                                </div>
                            </div>
                            <hr className="border-slate-700 my-6" />
                            <p className="text-slate-400 text-sm">
                                {t('footer-copy')}<br/>
                                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©. Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‡Ø¯ Ù…Ø®ØµØµ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠ ÙˆØ§Ù„ØªÙˆØ¹ÙˆÙŠ.
                            </p>
                        </div>
                    </footer>
                </div>
            );
        };

        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙŠÙŠØ± Ù„Ù„ØªØºÙ„ÙŠÙ Ø¨Ù€ LanguageProvider
        ReactDOM.render(<LanguageProvider><CovenantPage /></LanguageProvider>, document.getElementById('root'));
    </script>
</body>
</html>