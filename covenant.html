<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="covenant_title">عهد التحرر والقيادة | المرساة الرقمية</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { 
            theme: { 
                extend: { 
                    // تعريف الألوان الموحدة (anchor-blue, anchor-gold)
                    colors: { 'anchor-blue': '#1a365d', 'anchor-gold': '#d69e2e' }, 
                    fontFamily: { sans: ['Tajawal', 'sans-serif'], serif: ['Amiri', 'serif'] } 
                } 
            } 
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body { background-color: #f8fafc; font-family: 'Tajawal', sans-serif; } 
        @media print { .no-print { display: none !important; } body { background: white; } }
        .covenant-box { border: 4px solid #1a365d; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React; 

        // Navbar Component (للتوافق مع React)
        const Navbar = ({ translations, setLanguage, convertCurrency }) => {
            // يتم استدعاء الدوال setLanguage و convertCurrency من الدوال العامة في الأسفل
            
            return (
                <nav className="bg-white shadow-lg sticky top-0 z-50 no-print">
                    <div className="container mx-auto px-4 py-3 flex justify-between items-center">
                        <a href="index.html" className="flex items-center space-x-3 space-x-reverse">
                            <img src="logo.png" width="45" className="rounded-lg shadow-sm" alt="Logo" />
                            <h1 className="text-xl font-bold text-gray-900" data-key="site_name">{translations.ar.site_name}</h1>
                        </a>
                        
                        <div className="hidden md:flex items-center gap-5">
                            <select id="lang-select" onChange={(e) => setLanguage(e.target.value)} className="text-xs border border-gray-300 rounded p-1 bg-white focus:outline-none focus:border-blue-500">
                                <option value="ar">عربي</option><option value="en">English</option><option value="fr">Français</option><option value="de">Deutsch</option>
                            </select>
                            <select id="curr-select" onChange={(e) => convertCurrency(e.target.value)} className="text-xs border border-gray-300 rounded p-1 bg-white font-bold text-blue-900 focus:outline-none focus:border-blue-500">
                                <option value="SAR">SAR (ر.س)</option><option value="USD">USD ($)</option><option value="EUR">EUR (€)</option>
                            </select>
                            <a href="buy.html" className="bg-anchor-blue text-white px-6 py-2 rounded-lg text-sm font-bold shadow-md flex items-center gap-2 no-underline" data-key="nav_join">
                                <i className="fas fa-shopping-cart"></i> {translations.ar.nav_join}
                            </a>
                             <button onClick={() => window.print()} className="bg-gray-200 text-slate-700 px-4 py-2 rounded-lg font-bold text-sm hover:bg-gray-300 transition">
                                <i className="fas fa-print"></i> <span data-key="covenant_btn_print">طباعة</span>
                            </button>
                        </div>
                        
                        <button id="mobile-menu-btn" className="md:hidden text-gray-800 p-2"><i className="fas fa-bars text-xl"></i></button>
                    </div>
                    {/* Mobile Menu Content is simplified as this is a utility page */}
                </nav>
            );
        };

        const CovenantPage = ({ translations, setLanguage, convertCurrency }) => {
            const [name, setName] = useState('');
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);

            const covenantItems = [
                { key: 'covenant_li1', text: translations.ar.covenant_li1 || 'أتعهد بوضع القيمة الجوهرية لحياتي فوق الإغراءات الرقمية المشتتة.' },
                { key: 'covenant_li2', text: translations.ar.covenant_li2 || 'ألتزم بتخصيص وقت محدد يومياً لـ **إطفاء الشاشة** والتواصل الحقيقي مع عالمي غير الرقمي.' },
                { key: 'covenant_li3', text: translations.ar.covenant_li3 || 'أُقر بسيادتي على جهازي، وأقوم بتعديل الإشعارات والتطبيقات لخدمة أهدافي.' },
                { key: 'covenant_li4', text: translations.ar.covenant_li4 || 'سأقيس نجاحي بإنجازاتي الواقعية، لا بإعجاباتي الرقمية.' },
            ];
            
            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar translations={translations} setLanguage={setLanguage} convertCurrency={convertCurrency} />
                    
                    <main className="flex-grow py-12 px-4">
                        <div className="max-w-3xl mx-auto bg-white p-8 md:p-12 rounded-2xl shadow-xl covenant-box border-4 border-double border-anchor-blue relative overflow-hidden">
                            <header className="text-center mb-10">
                                <i className="fas fa-scroll text-6xl text-anchor-blue mb-4"></i>
                                <h1 className="text-4xl font-bold font-serif text-anchor-blue mb-2" data-key="covenant_title">{translations.ar.covenant_title}</h1>
                                <p className="text-gray-500 text-sm" data-key="covenant_subtitle">{translations.ar.covenant_subtitle}</p>
                            </header>
                            
                            <div className="space-y-6 text-lg leading-relaxed text-gray-800 text-right">
                                <p className="font-bold font-serif text-anchor-blue" data-key="covenant_intro">أنا الموقع أدناه، أُعلن بوعي كامل التزامي بما يلي:</p>
                                
                                <ul className="list-decimal pr-6 space-y-3 marker:text-anchor-gold">
                                    {covenantItems.map((item, index) => (
                                        <li key={index} dangerouslySetInnerHTML={{ __html: item.text }}></li>
                                    ))}
                                </ul>
                            </div>
                            
                            <div className="mt-16 pt-8 border-t border-gray-200 grid grid-cols-2 gap-12">
                                <div className="no-print">
                                    <label className="block text-sm font-bold text-gray-500 mb-2" data-key="covenant_name">الاسم</label>
                                    <input type="text" id="name-input" value={name} onChange={(e) => setName(e.target.value)} placeholder={translations.ar.covenant_name} className="w-full border-b-2 border-gray-300 h-8 focus:border-anchor-blue focus:outline-none transition"/>
                                </div>
                                <div className="no-print">
                                    <label className="block text-sm font-bold text-gray-500 mb-2" data-key="covenant_date">التاريخ</label>
                                    <input type="date" id="date-input" value={date} onChange={(e) => setDate(e.target.value)} className="w-full border-b-2 border-gray-300 h-8 focus:border-anchor-blue focus:outline-none transition"/>
                                </div>
                                
                                {/* Print View Placeholder */}
                                <div className="hidden print:block">
                                    <label className="block text-sm font-bold text-gray-500 mb-2">الاسم</label>
                                    <p className="border-b-2 border-gray-900 h-8 font-bold text-lg">{name}</p>
                                </div>
                                <div className="hidden print:block">
                                    <label className="block text-sm font-bold text-gray-500 mb-2">التاريخ</label>
                                    <p className="border-b-2 border-gray-900 h-8 font-bold text-lg">{date}</p>
                                </div>
                            </div>

                            <div className="text-center mt-8 no-print space-x-4 space-x-reverse">
                                <button onClick={() => window.alert(`تم توقيع العهد بواسطة ${name || 'مجهول'} بتاريخ ${date}`)} className="bg-anchor-blue text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-800 transition shadow-lg">
                                    <i className="fas fa-signature ml-2"></i> <span data-key="covenant_btn_sign">توقيع العهد الآن</span>
                                </button>
                                <button onClick={() => window.print()} className="bg-anchor-gold text-anchor-blue px-8 py-3 rounded-lg font-bold hover:bg-yellow-400 transition shadow-lg">
                                    <i className="fas fa-print ml-2"></i> <span data-key="covenant_btn_print">طباعة العهد</span>
                                </button>
                            </div>
                            
                            <div className="text-center mt-4 text-sm no-print">
                                <a href="Pledge_Paper.pdf" download className="text-blue-600 hover:underline font-bold" data-key="covenant_btn_download">تحميل كملف PDF</a>
                            </div>
                        </div>
                    </main>
                    
                    <footer className="bg-anchor-blue text-slate-400 py-6 text-center text-sm no-print">© 2025 المرساة الرقمية</footer>
                </div>
            );
        };

        const RootComponent = () => {
             // 1. قاموس الترجمة (لضمان عمل الأزرار والقائمة)
            const translations = {
                'ar': { 
                    'site_name': 'المرساة الرقمية', 'nav_home': 'الرئيسية', 'nav_join': 'احجز الكتاب', 'covenant_title': 'عهد التحرر والقيادة', 'covenant_subtitle': 'وثيقة شخصية للسيادة الرقمية', 'covenant_name': 'الاسم', 'covenant_date': 'التاريخ', 'covenant_btn_sign': 'توقيع العهد الآن', 'covenant_btn_print': 'طباعة', 'covenant_btn_download': 'تحميل كملف PDF',
                    'covenant_li1': 'أتعهد بوضع القيمة الجوهرية لحياتي فوق الإغراءات الرقمية المشتتة.', 'covenant_li2': 'ألتزم بتخصيص وقت محدد يومياً لـ **إطفاء الشاشة** والتواصل الحقيقي مع عالمي غير الرقمي.', 'covenant_li3': 'أُقر بسيادتي على جهازي، وأقوم بتعديل الإشعارات والتطبيقات لخدمة أهدافي.', 'covenant_li4': 'سأقيس نجاحي بإنجازاتي الواقعية، لا بإعجاباتي الرقمية.',
                },
                'en': { 
                    'site_name': 'Digital Anchor', 'nav_home': 'Home', 'nav_join': 'Order Book', 'covenant_title': 'Pledge of Liberation and Leadership', 'covenant_subtitle': 'A personal document for digital sovereignty', 'covenant_name': 'Name', 'covenant_date': 'Date', 'covenant_btn_sign': 'Sign Pledge Now', 'covenant_btn_print': 'Print Pledge', 'covenant_btn_download': 'Download PDF',
                    'covenant_li1': 'I pledge to prioritize my core life values over digital distractions.', 'covenant_li2': 'I commit to dedicating specific time daily to **turn off the screen** and engage with my real world.', 'covenant_li3': 'I affirm sovereignty over my devices, adjusting notifications and apps to serve my goals.', 'covenant_li4': 'I will measure success by my real-world achievements, not digital likes.',
                }
                // ... (بقية اللغات للتوحيد)
            };
            const RATES = { 'SAR': { r: 1, s: 'SAR' }, 'USD': { r: 0.27, s: '$' }, 'EUR': { r: 0.25, s: '€' } };
            
            // 2. دوال العملة واللغة (الضرورية)
            const convertCurrency = (curr) => { /* Logic is in the full script */ };
            const setLanguage = (lang) => { /* Logic is in the full script */ };

            useEffect(() => {
                 const defaultLang = 'ar'; // يمكنك استخدام localStorage.getItem('preferredLang') || 'ar';
                 setLanguage(defaultLang);
            }, []);

            return <CovenantPage translations={translations} setLanguage={setLanguage} convertCurrency={convertCurrency} />;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RootComponent />);
        
        // **ملاحظة:** الدوال setLanguage و convertCurrency غير معرفة بالكامل هنا.
        // يجب أن يتم لصق السكريبت الموحد من الخطوة 2 (الكود الكبير) بعد هذا الوسم.
    </script>
    
    </body>
</html>